<script>
  window.onmessage = async event => {
    recieved_hex = event.data.pluginMessage;

    fetch('https://api.color.pizza/v1/' + recieved_hex)
      .then(response => {
        return response.json();
      })
      .then(data => {
        // Work with JSON data here
        let layer_name =
          data.colors[0].name + ' / ' + data.colors[0].requestedHex;
        parent.postMessage({pluginMessage: layer_name}, '*');
      })
      .catch(err => {
        // Do something for an error here
        console.log(error);
      });
  };
</script>
